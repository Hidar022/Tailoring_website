{% extends 'base.html' %}

{% block title %}My Measurements{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">üìè My Measurements</h2>

    <!-- ‚úÖ Women's Measurements -->
    <h4 class="mt-4 text-danger">üë© Women's Measurements</h4>
    {% if female_measurements %}
        <div class="table-responsive mb-4">
            <table class="table table-bordered text-center align-middle shadow-sm">
                <thead class="table-danger">
                    <tr>
                        <th>üë©</th>
                        <th>Date Added</th>
                        <th>Height (cm)</th>
                        <th>Chest (cm)</th>
                        <th>Waist (cm)</th>
                        <th>Hips (cm)</th>
                        <th>Arm Length (cm)</th>
                        <th>Bust (cm)</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>
                    {% for m in female_measurements %}
                        <tr>
                            <td><span class="badge bg-danger">üë©</span></td>
                            <td>{{ m.date_added|date:"M d, Y" }}</td>
                            <td>{{ m.height }}</td>
                            <td>{{ m.chest }}</td>
                            <td>{{ m.waist }}</td>
                            <td>{{ m.hips }}</td>
                            <td>{{ m.arm_length }}</td>
                            <td>{{ m.bust }}</td>
                            <td>
                                <a href="{% url 'edit_measurement' m.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è Edit</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-warning">‚ö†Ô∏è No measurements found for women.</div>
    {% endif %}

    <!-- ‚úÖ Men's Measurements -->
    <h4 class="mt-4 text-primary">üë® Men's Measurements</h4>
    {% if male_measurements %}
        <div class="table-responsive mb-4">
            <table class="table table-bordered text-center align-middle shadow-sm">
                <thead class="table-primary">
                    <tr>
                        <th>üë®</th>
                        <th>Date Added</th>
                        <th>Arm Length (cm)</th>
                        <th>Shoulder (cm)</th>
                        <th>Hand (cm)</th>
                        <th>Shirt Length (cm)</th>
                        <th>Trouser Length (cm)</th>
                        <th>Neck Size (cm)</th>
                        <th>Shirt Size</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>
                    {% for m in male_measurements %}
                        <tr>
                            <td><span class="badge bg-primary">üë®</span></td>
                            <td>{{ m.date_added|date:"M d, Y" }}</td>
                            <td>{{ m.arm_length }}</td>
                            <td>{{ m.shoulder }}</td>
                            <td>{{ m.hand }}</td>
                            <td>{{ m.shirt_length }}</td>
                            <td>{{ m.trouser_length }}</td>
                            <td>{{ m.neck_size }}</td>
                            <td>{{ m.shirt_size }}</td>
                            <td>
                                <a href="{% url 'edit_measurement' m.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è Edit</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-warning">‚ö†Ô∏è No measurements found for men.</div>
    {% endif %}

    <!-- Add New Measurement Button -->
    <div class="text-center mt-4">
        <a href="{% url 'add_measurements' %}" class="btn btn-primary btn-lg">
            ‚ûï Add New Measurement
        </a>
    </div>

</div>
<script>
    const showGender = "{{ show_gender }}";

    // Function to add highlight animation
    function highlightSection(selector, colorClass) {
        const section = document.querySelector(selector);
        if (section) {
            section.scrollIntoView({ behavior: "smooth", block: "center" });

            // Add highlight class
            section.classList.add(colorClass, "highlight-glow");

            // Remove after animation ends
            setTimeout(() => {
                section.classList.remove(colorClass, "highlight-glow");
            }, 2000);
        }
    }

    // Trigger based on gender
    if (showGender === "male") {
        highlightSection(".table-primary", "border-primary");
    } else if (showGender === "female") {
        highlightSection(".table-danger", "border-danger");
    }
</script>

<style>
/* ‚ú® Smooth glowing highlight effect */
.highlight-glow {
    box-shadow: 0 0 25px rgba(0, 123, 255, 0.7) !important;
    transition: box-shadow 0.5s ease-in-out;
    animation: glowPulse 1.5s ease-in-out 2;
    border-radius: 8px;
}

@keyframes glowPulse {
    0% { box-shadow: 0 0 0px rgba(0,0,0,0); }
    50% { box-shadow: 0 0 20px rgba(255,193,7,0.8); }
    100% { box-shadow: 0 0 0px rgba(0,0,0,0); }
}
</style>

{% endblock %}
