{% extends 'base.html' %}
{% block title %}Edit Measurement - Bin Tailoring Shop{% endblock %}

{% block content %}
<style>
/* =============================
   EDIT MEASUREMENT PAGE
============================= */
.edit-bg {
  background: linear-gradient(135deg, #fefefe, #f7f6f4);
  min-height: 100vh;
  padding: 70px 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.form-edit {
  background: #fff;
  border-radius: 18px;
  padding: 40px 35px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
  max-width: 700px;
  width: 100%;
  animation: fadeInUp 1s ease both;
}

.form-edit h2 {
  text-align: center;
  font-weight: 700;
  margin-bottom: 25px;
  color: #1f1f1f;
}

.form-select,
.form-control {
  border-radius: 10px;
  border: 1px solid #ccc;
  transition: all 0.3s ease;
}

.form-select:focus,
.form-control:focus {
  border-color: #b49147;
  box-shadow: 0 0 8px rgba(180,145,71,0.4);
}

.btn-primary {
  background-color: #b49147;
  border: none;
  border-radius: 50px;
  padding: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background-color: #9f7e38;
  transform: translateY(-2px);
}

.btn-secondary {
  border-radius: 50px;
}

.section-title {
  font-weight: 600;
  color: #b49147;
  margin-top: 15px;
  margin-bottom: 10px;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<div class="edit-bg">
  <form method="POST" class="form-edit">
    {% csrf_token %}
    <h2>Edit Measurement ‚úèÔ∏è</h2>

    <div class="mb-3">
      <label class="form-label">Gender</label>
      <select name="gender" id="gender" class="form-select" required>
        <option value="male" {% if measurement.gender == 'male' %}selected{% endif %}>Men's</option>
        <option value="female" {% if measurement.gender == 'female' %}selected{% endif %}>Women's</option>
      </select>
    </div>

    <!-- Female Fields -->
    <div id="female-fields" class="{% if measurement.gender != 'female' %}d-none{% endif %}">
      <p class="section-title">üë© Women's Measurements</p>
      <div class="row g-3">
        <div class="col-md-6"><input type="number" name="height" value="{{ measurement.height }}" class="form-control" placeholder="Height (cm)"></div>
        <div class="col-md-6"><input type="number" name="chest" value="{{ measurement.chest }}" class="form-control" placeholder="Chest (cm)"></div>
        <div class="col-md-6"><input type="number" name="waist" value="{{ measurement.waist }}" class="form-control" placeholder="Waist (cm)"></div>
        <div class="col-md-6"><input type="number" name="hips" value="{{ measurement.hips }}" class="form-control" placeholder="Hips (cm)"></div>
        <div class="col-md-6"><input type="number" name="arm_length" value="{{ measurement.arm_length }}" class="form-control" placeholder="Arm Length (cm)"></div>
        <div class="col-md-6"><input type="number" name="bust" value="{{ measurement.bust }}" class="form-control" placeholder="Bust (cm)"></div>
      </div>
    </div>

    <!-- Male Fields -->
    <div id="male-fields" class="{% if measurement.gender != 'male' %}d-none{% endif %}">
      <p class="section-title">üë® Men's Measurements</p>
      <div class="row g-3">
        <div class="col-md-6"><input type="number" name="arm_length" value="{{ measurement.arm_length }}" class="form-control" placeholder="Arm Length (cm)"></div>
        <div class="col-md-6"><input type="number" name="shoulder" value="{{ measurement.shoulder }}" class="form-control" placeholder="Shoulder (cm)"></div>
        <div class="col-md-6"><input type="number" name="hand" value="{{ measurement.hand }}" class="form-control" placeholder="Hand (cm)"></div>
        <div class="col-md-6"><input type="number" name="shirt_length" value="{{ measurement.shirt_length }}" class="form-control" placeholder="Shirt Length (cm)"></div>
        <div class="col-md-6"><input type="number" name="trouser_length" value="{{ measurement.trouser_length }}" class="form-control" placeholder="Trouser Length (cm)"></div>
        <div class="col-md-6"><input type="number" name="neck_size" value="{{ measurement.neck_size }}" class="form-control" placeholder="Neck Size (cm)"></div>
        <div class="col-md-6"><input type="text" name="shirt_size" value="{{ measurement.shirt_size }}" class="form-control" placeholder="Shirt Size"></div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary w-100 mt-4">Update Measurement ‚úÖ</button>
    <a href="{% url 'my_measurements' %}" class="btn btn-secondary w-100 mt-2">‚¨Ö Back to My Measurements</a>
  </form>
</div>

<script>
const genderSelect = document.getElementById("gender");
const femaleFields = document.getElementById("female-fields");
const maleFields = document.getElementById("male-fields");

genderSelect.addEventListener("change", function() {
  femaleFields.classList.add("d-none");
  maleFields.classList.add("d-none");
  if (this.value === "female") femaleFields.classList.remove("d-none");
  else if (this.value === "male") maleFields.classList.remove("d-none");
});
</script>
{% endblock %}
